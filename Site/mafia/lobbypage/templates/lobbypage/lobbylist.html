{% extends 'lobby_base.html' %}
 
{% block title %}–°–ø–∏—Å–æ–∫ –õ–æ–±–±–∏{% endblock %}

{% block css %}{% load static %}<link rel="stylesheet" href="{% static "/css/lobbylist_styles.css" %}">{% endblock %}

{% block content %}
<div class="block" id="listblock">
    <div id="headblock">
        <a class="ExitButton" href="{% url "mainpage" %}">ü°∏</a>
	    <h2 id="h-head">–°–ø–∏—Å–æ–∫ –ª–æ–±–±–∏</h2>
    </div>
    <div class="list-lobby">
        {% if rooms %}
            {% for room in rooms %}
                {% if not room.is_game %}
                    {% for hostprofile in room.profile_set.all %}
                        {% if hostprofile.pk == room.roomhostid %}
                        
                            <div class="lobby" id="room-{{room.roomhostid}}" onclick="toggle_visibility('rightblock','room-{{room.roomhostid}}','{{room.roomname}}','{{hostprofile.profile_img.url}}','{{hostprofile.nickname}}',`{% url 'TheLobby' room.GetLink %}`,'{{ room.profile_set.count }}','{% for profile in room.profile_set.all %}{{ profile.nickname | safe}}<br>{% endfor %}');">
                                <h2 style="margin-bottom: 10px;">üë•</h2>
                                <h3 class="count-lobby" style="margin-right:1em;">{{ room.profile_set.count }}/12</h3> 
                                <h4 class="name-lobby">{{ room.roomname }}</h4>
                                <h3>üîä</h3>
                                <h3 style="margin-right: 1em;">üìπ</h3>
                                <img width="40px" height="40px" class="lobby-img" src="{{hostprofile.profile_img.url}}" alt="Icon"> 
                            </div>
                            
                        {% endif %} 
                    {% endfor %}
                {% endif %}   
            {% endfor %}
        {% else %}
            <div id="list-empty">–°–ø–∏—Å–æ–∫ –ª–æ–±–±–∏ –ø—É—Å—Ç</div>
        {% endif %}
    </div>
</div>
<div class="block" id="rightblock" style="display: none; padding: 0.5em;">

</div>
{% endblock %}

{% block script %}
<script>
     function toggle_visibility(id,id2,roomname,urlimg,hostname,urllink,countplayers,data) {
       var e = document.getElementById(id);
       var e2 = document.getElementById(id2);

       str='<h2 style="align-self:center">–í—ã–±—Ä–∞–Ω–Ω–æ–µ</h2>\
       <h2 style="align-self:center">–õ–æ–±–±–∏</h2>\
       <div style="width: 100%;margin-top:1em;display:flex;justify-content: center;">\
            <img width="100px" height="100px" class="lobby-img-right" src="'+urlimg+'" alt="Icon">\
        </div>\
        <div>\
            <h4 style="margin-bottom: 0.5em; max-height:50px;min-height:auto;text-overflow: ellipsis;overflow:hidden; width:260px;">–ù–∞–∑–≤–∞–Ω–∏–µ:<i style="font-weight: lighter;">'+roomname+'</i></h4>\
            <h4 style="margin-bottom: 0.5em; height:auto;text-overflow: ellipsis;overflow:hidden;white-space:nowrap; width:260px;">–ê–¥–º–∏–Ω:<i style="font-weight: lighter;">'+hostname+'</i></h4>\
            <h4 style="margin-bottom: 0.5em;">–ö–æ–ª-–≤–æ —á–µ–ª–æ–≤–µ–∫:<i style="font-weight: lighter;">'+countplayers+'/12</i></h4>\
        </div>\
       <div class="list-lobby" style="width:240px; padding:0.5em">\
            '+data+'\
       </div>\
       <a class="EditProfile" href = "'+urllink+'">–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è</a>';

       if(e.style.display == 'flex')
       {
            if(e2.classList == 'activelobby')
            {
                var lights = document.getElementsByClassName('activelobby');
                while (lights.length)
                {
                    lights[0].classList.add('lobby');
                    lights[0].classList.remove('activelobby');
                }
                e.style.display = 'none';
            }
            else
            {
                var lights = document.getElementsByClassName('activelobby');
                while (lights.length)
                {
                    lights[0].classList.add('lobby');
                    lights[0].classList.remove('activelobby');
                }
                e2.classList.remove('lobby');
                e2.classList.add('activelobby');
                e.innerHTML=str;
            }
       }
       else
       {
        var lights = document.getElementsByClassName('activelobby');
                while (lights.length)
                {
                    lights[0].classList.add('lobby');
                    lights[0].classList.remove('activelobby');
                }
                e2.classList.remove('lobby');
                e2.classList.add('activelobby');
                e.innerHTML=str;
         e.style.display = 'flex';  
       }
          
   }
</script>
{% endblock %}